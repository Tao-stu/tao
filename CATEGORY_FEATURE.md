# 博客分类功能使用说明

## 功能概述

为CMS系统添加了完整的分类功能，可以替代或补充标签系统，提供更好的内容组织方式。

## 新增功能

### 1. 数据库结构
- **categories表**: 存储分类信息
  - `id`: 主键
  - `name`: 分类名称
  - `slug`: 分类别名（用于URL）
  - `description`: 分类描述
  - `created_at`: 创建时间

- **posts表更新**: 添加`category_id`字段，关联到categories表

### 2. API接口
- `GET /api/categories`: 获取所有分类（包含文章数量统计）
- `POST /api/categories`: 创建新分类（需要认证）
- `PUT /api/categories`: 更新分类（需要认证）
- `DELETE /api/categories`: 删除分类（需要认证，有文章保护）

### 3. 前端功能

#### 博客页面 (Blog.vue)
- **分类筛选**: 显示所有分类，点击可筛选对应分类的文章
- **分类显示**: 在文章卡片中显示文章所属分类
- **文章统计**: 显示每个分类下的文章数量

#### 博客编辑器 (BlogEditor.vue)
- **分类选择**: 在编辑文章时可以选择分类
- **必填字段**: 分类为必选项，默认选择"未分类"

#### 管理后台 (BlogCMS.vue)
- **分类管理**: 新增"分类"管理标签页
- **CRUD操作**: 支持分类的创建、编辑、删除
- **文章保护**: 有文章的分类无法删除，防止数据丢失
- **实时统计**: 显示每个分类下的文章数量

## 默认分类

系统会自动创建以下默认分类：
1. **未分类** (uncategorized) - 默认分类
2. **技术** (tech) - 技术相关文章
3. **生活** (life) - 生活感悟和随笔
4. **学习** (learning) - 学习笔记和心得

## 使用方法

### 1. 管理分类
1. 登录管理后台
2. 点击左侧菜单的"分类"
3. 可以进行以下操作：
   - 新建分类：点击"新建分类"按钮
   - 编辑分类：点击分类卡片的"编辑"按钮
   - 删除分类：点击分类卡片的"删除"按钮（仅限无文章的分类）

### 2. 发布文章时选择分类
1. 在写文章或编辑文章时
2. 在"分类"下拉菜单中选择合适的分类
3. 分类为必选项，默认选择"未分类"

### 3. 浏览分类文章
1. 在博客页面可以看到顶部的分类筛选栏
2. 点击分类名称可以筛选该分类下的所有文章
3. 再次点击可以取消筛选，显示所有文章
4. 每个分类按钮会显示该分类下的文章数量

## 技术特点

### 1. 数据库设计
- 使用外键约束确保数据完整性
- 默认分类保护，防止删除默认分类
- 文章计数实时更新

### 2. API安全
- 分类管理操作需要管理员认证
- 删除分类时检查是否有关联文章
- 输入验证和错误处理

### 3. 用户体验
- 响应式设计，支持移动端
- 实时反馈和加载状态
- 友好的错误提示
- 平滑的动画效果

### 4. 兼容性
- 与现有标签系统兼容，可以同时使用
- 向后兼容，不影响现有文章
- 自动迁移现有数据

## 注意事项

1. **分类别名规则**: 只能包含小写字母、数字和连字符，不能以连字符开头或结尾
2. **删除保护**: 有文章的分类无法删除，需要先将文章移到其他分类
3. **默认分类**: "未分类"为系统默认分类，新文章默认归入此类
4. **URL友好**: 分类别名用于生成SEO友好的URL

## 未来扩展

可以考虑的功能扩展：
1. 分类层级（子分类）
2. 分类图标
3. 分类排序
4. 分类颜色主题
5. 批量移动文章到其他分类
6. 分类导出/导入功能